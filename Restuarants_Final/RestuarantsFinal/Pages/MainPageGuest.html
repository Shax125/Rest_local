<!DOCTYPE html>
<html>
<head>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="../Scripts/bootstrap.min.js"></script>
    <script src="../Scripts/jquery-3.4.1.min.js"></script>
    <script src="../Scripts/ajaxCalls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <script src="../Scripts/ajaxCalls.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <link href="Main.css" rel="stylesheet" />


    <meta charset="utf-8" />
    <title>GuestMainPage</title>
    <script>
        line = '';
        $(document).ready(function () {


            if (localStorage["customer_Id"] == null) {

               // $("#clear").prop("disabled", true);
                // $("#clear").attr('disabled', 'disabled');
                line += "<li class='nav-item' id='Log'>" + "<a class='nav-link active' href='SignIn.html'>Sign In</a>" + "</li >";
              
                document.getElementById("navbar-nav2").innerHTML += line; 
                

            }


            else {
                //$("#clear").prop("disabled", false);
                //$("input").removeAttr('disabled');
                line += "<li class='nav-item' >" + "<a class='nav-link active' onclick='clearLocal()' href='MainPageGuest.html'>Sign Out</a>" + "</li >";

                //line += " <li class='nav-item'> " + "< a class='nav-link active' id = 'clear' href = 'MainPageGuest.html' tabindex = '-1' > Sign Out</a >" + "</li > ";
              
              
                document.getElementById("navbar-nav2").innerHTML += line; 

            }


            $("#clear").click(clearLocal);

            $("#search").click(f1);

        });

        function clearLocal() {
            localStorage.clear();

        }

        function f1() {
            if (category = $("#category").val() != 0)
                getr();
            else
                alert("please choose category first...");


            return false;

        }
        function GetSuccess(data) {
            console.log(data)
            var str = "";
            document.getElementById("ph2").innerHTML = "";


            str += "<div class='container'>";
            str += "<div class='row'>";


            for (var i = 0; i < data.length; i++) {




                str += "<div class='card col-sm-4 ' style ='width: 18rem ;'>";

                str += "<img class='card-img-top'  src=" + data[i].Img + " alt='Card image cap'>"
                str += "<div class='card-body'>"
                str += "<h3 class='card-title'>" + data[i].Name + "</h3>";


                str += "<ul class='list-group list-group-flush'>";
                str += "<li class='list-group-item'>  <b>Address:</b> " + data[i].Address + "</li>"
                str += "<li class='list-group-item'> <b>Phone:</b> " + data[i].Phone + "</li>"
                str += "<li class='list-group-item'>  <b>Rating:</b> " + data[i].Rating + "</li>"
                str += "<li class='list-group-item'>  <b>PriceRange:</b> " + data[i].PriceRange + "</li>"
                str += "</ul>";
                str += "</div>"
                str += "</div>";
                str += "</br>";






            }

            str += "</div>";// for row
            str += "</div>";// for container
            $("#ph1").append(str);

        }
        function GetError(ex) {
            console.log(ex);
        }
        function getr() {

            var category = $("#category").val();
            console.log(category);
            ajaxCall("GET", "/api/Business?categoryfromuser=" + category, "", GetSuccess, GetError);

        }



    </script>


</head>
<body>

    <section>
        <header>
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <a class="navbar-brand" href="MainPageGuest.html">Restuarants</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav" id="navbar-nav2">

                            <li class="nav-item">
                                <a class="nav-link active" href="Preferences.html">Preferences</a>
                            </li>

                            <!--<li class='nav-item' id='Log'>
                            <a class='nav-link active' href='SignIn.html'>SignIn</a>
                            </li>-->
                            <!--<li class="nav-item">
                            <a class="nav-link active" id="clear" href="MainPageGuest.html" tabindex="-1" aria-disabled="true">Sign Out</a>
                            </li>-->

                            <li class="nav-item" id="clear">
                                <a class="nav-link active" href="CustomerRegister.html" tabindex="-1" aria-disabled="true">Register</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" href="Manager.html" tabindex="-1" aria-disabled="true">Managment</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <!-- Navbar -->
            <!-- Background image -->
            <div class="p-5 text-center bg-image"
                 style=" background-image: url('https://i.pinimg.com/originals/c2/c6/4b/c2c64b930af48a341c3adef7c659d36e.png'); height: 400px; margin-top: 58px; ">
                <div class="mask" style="background-color: rgba(0, 0, 0, 0); margin-top:100px">
                    <div class="d-flex justify-content-center align-items-center h-100">
                        <div class="text-white">
                            <h1 class="display-4 font-weight-bold fonting">Resturants</h1>
                            <h4 class="font-italic mb-4 fonting">By Adam Uzan&ShayDavid&shirHertzman</h4>
                        </div>
                    </div>
                </div>
            </div>
            <br /><br /><br />
            <!-- Background image -->
        </header>
    </section>

    <div class="CatSearch">

        <label class="lbl"><b>Please Choose a Category: </b></label>
        <select class="drop" name="cuisine" id="category">
            <option value="0">---</option>
            <option value="American">American</option>
            <option value="Asian">Asian</option>
            <option value="Italian">Italian</option>
            <option value="Lebanese">Lebanese</option>
            <option value="Filipino">Filipino</option>
            <option value="European">European</option>
            <option value="Indian">Indian</option>
        </select>


        <button type="button" class="btn btn-secondary" id="search">Search</button>

    </div>
    <br/>

    <h1 class="organic">By your Request</h1>
    <br/>
    <div id="ph1"><!-- resturants of organic area --></div>

   


    <div>


        <br />
        <hr />

        <h1 class="funded">VIP</h1>
        <br />
        <div id="ph2">

            <!-- resturants of funded area -->
        </div>

    </div>


    <div>adam</div>
   
</body>
</html>